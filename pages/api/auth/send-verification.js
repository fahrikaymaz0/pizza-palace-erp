import nodemailer from 'nodemailer';import jwt from 'jsonwebtoken';// E-posta yapÄ±landÄ±rmasÄ±const transporter = nodemailer.createTransport({  service: 'gmail',  auth: {    user: process.env.EMAIL_USER,    pass: process.env.EMAIL_PASS  }});export default async function handler(req, res) {  if (req.method !== 'POST') {    return res.status(405).json({ message: 'Sadece POST istekleri destekleniyor' });  }  try {    const { email } = req.body;    if (!email) {      return res.status(400).json({ message: 'E-posta adresi gereklidir' });    }    // DoÄŸrulama tokeni oluÅŸtur    const verificationToken = jwt.sign(      { email },      process.env.JWT_SECRET || 'fallback-secret',      { expiresIn: '24h' }    );    // DoÄŸrulama linki    const verificationUrl = `${process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000'}/verify-email?token=${verificationToken}`;    // E-posta iÃ§eriÄŸi    const mailOptions = {      from: process.env.EMAIL_USER,      to: email,      subject: 'ğŸ• Pizza KrallÄ±ÄŸÄ± - E-posta DoÄŸrulama',      html: `        <div style="max-width: 600px; margin: 0 auto; font-family: Arial, sans-serif;">          <div style="background: linear-gradient(135deg, #DC2626, #F59E0B); padding: 30px; text-align: center; color: white;">            <h1 style="margin: 0; font-size: 28px;">ğŸ‘‘ Pizza KrallÄ±ÄŸÄ±</h1>            <p style="margin: 10px 0 0 0; font-size: 16px;">E-posta DoÄŸrulama</p>          </div>                    <div style="padding: 40px 30px; background: #f9fafb;">            <h2 style="color: #374151; margin-bottom: 20px;">Merhaba!</h2>            <p style="color: #6b7280; line-height: 1.6; margin-bottom: 30px;">              Pizza KrallÄ±ÄŸÄ±'na hoÅŸ geldiniz! E-posta adresinizi doÄŸrulamak iÃ§in aÅŸaÄŸÄ±daki butona tÄ±klayÄ±n.            </p>                        <div style="text-align: center; margin: 40px 0;">              <a href="${verificationUrl}"                  style="background: linear-gradient(135deg, #DC2626, #F59E0B);                         color: white;                         padding: 15px 30px;                         text-decoration: none;                         border-radius: 25px;                         font-weight: bold;                         display: inline-block;                        box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);">                E-postamÄ± DoÄŸrula              </a>            </div>                        <p style="color: #9ca3af; font-size: 14px; line-height: 1.5;">              Bu link 24 saat boyunca geÃ§erlidir. EÄŸer bu iÅŸlemi siz yapmadÄ±ysanÄ±z, bu e-postayÄ± gÃ¶rmezden gelebilirsiniz.            </p>          </div>                    <div style="background: #374151; padding: 20px; text-align: center; color: #9ca3af; font-size: 14px;">            Â© 2024 Pizza KrallÄ±ÄŸÄ±. TÃ¼m haklarÄ± saklÄ±dÄ±r.          </div>        </div>      `    };    // E-posta gÃ¶nder    await transporter.sendMail(mailOptions);    res.status(200).json({       success: true,       message: 'DoÄŸrulama e-postasÄ± gÃ¶nderildi. E-posta kutunuzu kontrol edin.'     });  } catch (error) {    console.error('E-posta gÃ¶nderme hatasÄ±:', error);    res.status(500).json({       success: false,       message: 'E-posta gÃ¶nderilirken bir hata oluÅŸtu.'     });  }}